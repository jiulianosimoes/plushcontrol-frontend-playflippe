<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>M√°quinas PlayFlippe</title>

<style>
body { font-family: Arial; padding: 40px; background:#f5f5f5 }
input, button { padding:8px; margin-right:5px }
table { border-collapse: collapse; width:100%; margin-top:20px; background:white }
th, td { padding:10px; border:1px solid #ddd }
th { background:#222; color:white }
.acoes button { margin-right:6px }
</style>
</head>

<body>

<h2>M√°quinas PlayFlippe</h2>

<input id="nome" placeholder="Nome da m√°quina">
<input id="status" placeholder="Status">
<button onclick="adicionar()">Adicionar</button>

<table>
<thead>
<tr>
<th>ID</th>
<th>Nome</th>
<th>Status</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabela"></tbody>
</table>

<script>
const API = "https://plushcontrol-playflippe-production.up.railway.app/maquinas"

async function carregar() {
  const res = await fetch(API)
  const dados = await res.json()

  const tabela = document.getElementById("tabela")
  tabela.innerHTML = ""

  dados.forEach(m => {
    tabela.innerHTML += `
      <tr>
        <td>${m.id}</td>
        <td>${m.nome}</td>
        <td>${m.status}</td>
        <td class="acoes">
          <button onclick="editar(${m.id}, '${m.nome}', '${m.status}')">‚úè Editar</button>
          <button onclick="excluir(${m.id})">üóë Excluir</button>
        </td>
      </tr>
    `
  })
}

async function adicionar() {
  const nome = document.getElementById("nome").value
  const status = document.getElementById("status").value

  await fetch(API, {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ nome, status })
  })

  carregar()
}

async function excluir(id) {
  if(!confirm("Deseja excluir?")) return

  await fetch(${API}/${id}, { method:"DELETE" })
  carregar()
}

async function editar(id, nomeAtual, statusAtual) {
  const nome = prompt("Novo nome:", nomeAtual)
  const status = prompt("Novo status:", statusAtual)

  await fetch(${API}/${id}, {
    method:"PUT",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ nome, status })
  })

  carregar()
}

carregar()
</script>

</body>
</html>
